<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/core-ajax/core-ajax.html">

<dom-module name="events-service" attributes="events">
    <template>
        <style>
            :host {
                display: none;
            }
        </style>
        <core-ajax id="eventDataSource"
                   url="http://api.eventful.com/json/events/search?app_key=F2LZdBTh74TBL3R9&date=Future"
                   on-response="eventsLoaded"
                   handleAs="json" >
        </core-ajax>
    </template>
    <script>
        Polymer({
            is: 'events-service',
            ready: function() {
                this.events = [];
            },
            eventsLoaded: function() {
                // Make a copy of the loaded data
                this.events = this.$.eventDataSource.response.slice(0);
            },
            loadEvents: function() {
                this.$.eventDataSource.generateRequest();
            }

        });
    </script>
</dom-module>